# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Краткое описание инцидента	
21 октября в 22:52 UTC В результате замены не исправного 100G оптического оборудования в датацентре GitHub.com, пропала связь на 43 секудны между датацентрами, что привело к деградации сервисов на 24 часа 11 минут

## Предшествующие события	
21 октября в 22:52 UTC Плановая замена вышедшего из строя оптического оборудования

## Причина инцидента
Потеря соединения между сетевым улом на восточном побережье США и основным центром обработки данных на восточном побережье США

## Воздействие	
На метаданные веб-сайтов, хранящиеся в базах данных MySQL, такие как Issue и PR

## Обнаружение	
21 октября 22:54 UTC внутренние системы мониторинга начали генерировать оповещения, указывающие на многочисленные сбои в системах.
В 23:02 UTC инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных находятся в непредвиденном состоянии

## Реакция	
Связь была восстановлена за 43 секунды.

## Восстановление	
Восстановили консистентность взяв бинарные журналы MySQL на основном сайте, которые не были реплицированы на сайт на западном побережье из каждого затронутого кластера.

## Таймлайн
	21 октября 22:52 UTC Аварийное переключение кластеров для направления операций записи в ЦОД на западном побережье США
	21 октября 22:54 UTC Системы мониторинга начали генерировать предупреждения в 23:02 инженерыопределили что кластер в неожидаемом состоянии
	21 октября 23:07 UTC Команда вручную заблокировала внутренний инструмент развертывания, чтобы предотвратить дальнейшие изменения
	21 октября 23:13 UTC Поняли что затронуто множество баз данных кластера, позвали инженеров базданных Гитхаба
	21 октября 23:19 UTC Вырубили вебхуки
	22 октября 00:05 UTC Начали планировать как восстановить консистентноть
	22 октября 00:41 UTC Запустили резервное копирование для затронутых кластеров MySQL
	22 октября 06:51 UTC Несколько кластеров завершили восстановление и начали репликацию новых данных
	22 октября 07:46 UTC GitHub опубликовал пост с информацией об инцинденте
	22 октября 11:12 UTC Все базы данных установлены на восточном побережье США
	22 октября 13:15 UTC Стал увеличиваться трафик на GitHub.com, начали раврачивать дополнительные репли MySQL тольок для чтения
	22 октября 16:24 UTC Как только реплики синхронизировались, переключились на оригинальную топологию, оставили статус серверов Красный, пока начали готовиться к восстановлению
	22 октября 16:45 UTC Занимались балансировкой возросшей нагрузки во время восстановления
	22 октября 23:03 UTC Все восстановили переключили статус сайта на Зеленый
	
## Последующие действия	
Был выявлен ряд технических инициатив:
  - Настроить конфигурацию оркестратора запретив перемещение первичных баз за пределы региона
  - Перейти на новые статусы для предоставления более детальной информации о работе сервисов
  - Стали более активно продвигать ранее начатый проект по обслуживанию трафика в режиме активный/активный/активный для достижения избыточности N+1
  - Решили более активно проверять предположения
